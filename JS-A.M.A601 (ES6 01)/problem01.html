<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JS-A.M.A601 Problem 01</title>
  </head>
  <body>
    <!--  -->
    <script>
      (() => {
        const foo = (x) => {
          const y = x * 2;
        };

        return (z) => {
          if (z.length > 3) {
            return z.map((v) => {
              if (v > 3) return v + y;
              else
                return (function bar(v) {
                  return v > 3 ? v + y : bar(v * 4);
                })(v);
            });
          } else {
            const obj = [];
            setTimeout(() => {
              obj.length = 1;
              obj[0] = this.w;
            }, 100);
          }

          const p = foo(2);
          const list1 = [1, 3, 4];
          const list2 = list1.concat(6);

          list1 = p.call({ w: 42 }, list1);
          list2 = p(list2);

          setTimeout(() => {
            console.log(list1[0] === list2.reduce((s, v) => s + v, 0));
          }, 200);
        };
      })();
    </script>
  </body>
</html>
